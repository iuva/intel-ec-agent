# Utils 工具模块功能说明

## 模块概述
工具模块提供项目中通用的工具函数和辅助类，包括文件操作、网络通信、时间处理、路径管理等基础功能。

## 📋 文件功能说明

### `environment.py` - 环境变量管理
- **功能**: 环境变量配置和读取
- **作用**: 管理应用运行环境的相关配置

### `file_downloader.py` - 文件下载器
- **功能**: 文件下载功能实现
- **作用**: 提供HTTP文件下载能力，支持进度跟踪
- **特性**: 支持大文件分块下载，集成MD5校验

### `file_utils.py` - 文件操作工具
- **功能**: 文件系统操作辅助函数
- **作用**: 提供文件读写、路径检查等常用文件操作

### `http_client.py` - HTTP客户端
- **功能**: HTTP请求发送和响应处理
- **作用**: 封装HTTP通信功能，提供统一的API接口
- **特性**: 支持GET、POST等HTTP方法，集成错误处理

### `message_tool.py` - 消息工具
- **功能**: 消息对话框调用工具
- **作用**: 通过HTTP API调用消息框服务，实现双进程机制
- **特性**: 
  - 集成按钮超时功能（confirm_timeout、cancel_timeout）
  - 支持开发环境和生产环境自动检测
  - 提供统一的消息显示接口
- **核心类**: `MessageTool` - 消息工具主类

### `path_utils.py` - 路径工具
- **功能**: 路径处理和文件路径管理
- **作用**: 提供跨平台的路径操作函数
- **特性**: 支持根目录获取、可执行文件路径获取等

### `python_utils.py` - Python工具
- **功能**: Python语言相关辅助函数
- **作用**: 提供Python特有的工具函数

### `subprocess_utils.py` - 子进程工具
- **功能**: 子进程管理和执行
- **作用**: 封装子进程操作，支持管理员权限运行
- **特性**: 提供安全的子进程执行环境
- **关键函数**: `run_as_admin()` - 以管理员权限运行命令

### `time_utils.py` - 时间工具
- **功能**: 时间处理和格式化
- **作用**: 提供时间戳转换、时间格式化等时间相关操作

### `timer_utils.py` - 定时器工具
- **功能**: 定时任务管理
- **作用**: 提供定时器功能，支持延迟执行和周期性任务
- **特性**: 线程安全的定时器管理
- **关键函数**: `set_timeout()`, `clear_timeout()`

### `verify_md5.py` - MD5校验工具
- **功能**: 文件完整性校验
- **作用**: 计算文件的MD5哈希值，用于文件完整性验证
- **特性**: 支持大文件分块计算，避免内存溢出
- **关键函数**: `calculate_md5()` - 计算文件MD5哈希值

### `version_utils.py` - 版本工具
- **功能**: 版本信息管理
- **作用**: 处理应用版本信息的读取和比较

### `websocket_sync_utils.py` - WebSocket同步工具
- **功能**: WebSocket通信同步辅助
- **作用**: 提供WebSocket通信的同步处理功能

### `whl_updater.py` - Wheel包更新器
- **功能**: Python包更新管理
- **作用**: 管理Python wheel包的更新和安装

## 🎯 工具分类

### 🔧 文件操作类
- `file_downloader.py`: 文件下载
- `file_utils.py`: 文件系统操作
- `verify_md5.py`: 文件完整性校验

### 🌐 网络通信类
- `http_client.py`: HTTP通信
- `websocket_sync_utils.py`: WebSocket同步

### ⏰ 时间处理类
- `time_utils.py`: 时间处理
- `timer_utils.py`: 定时器管理

### 📁 路径管理类
- `path_utils.py`: 路径操作
- `environment.py`: 环境配置

### 💬 用户交互类
- `message_tool.py`: 消息对话框

### 🔄 进程管理类
- `subprocess_utils.py`: 子进程管理

## 🔗 模块间关系
- 工具模块为其他所有模块提供基础功能支持
- `file_downloader` 被 `auto_update` 模块用于文件下载
- `message_tool` 被 `ui` 模块用于消息显示，支持按钮超时功能
- `path_utils` 被多个模块用于路径处理
- `verify_md5` 被 `auto_update` 模块用于文件完整性校验
- `subprocess_utils` 被 `core` 模块用于管理员权限操作
- `timer_utils` 被 `api` 模块用于定时任务管理

## 🛠️ 技术特点
- 提供线程安全的工具函数
- 支持跨平台操作
- 集成错误处理和日志记录
- 模块化设计，便于复用和维护
- 支持开发环境和生产环境自动检测

## ⚡ 关键功能点
- **消息工具**: 支持双进程机制，通过HTTP API调用消息服务
- **MD5校验**: 大文件分块计算，确保文件完整性
- **子进程管理**: 管理员权限运行，确保操作安全性
- **定时器工具**: 线程安全定时任务管理
- **路径工具**: 跨平台路径处理，支持根目录和可执行文件路径获取