# src ç›®å½•ç»“æ„è¯´æ˜

## é¡¹ç›®æ¶æ„æ¦‚è¿°

src ç›®å½•åŒ…å«æœ¬åœ°ä»£ç†æœåŠ¡çš„æ ¸å¿ƒæºä»£ç ï¼Œé‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡ï¼Œå„åŠŸèƒ½æ¨¡å—èŒè´£æ¸…æ™°ã€‚

## ä¸»è¦æ¨¡å—è¯´æ˜

### ğŸ“¦ local_agent/ - ä¸»åº”ç”¨æ¨¡å—

#### ğŸ”§ æ ¸å¿ƒç»„ä»¶ (core/)
- `application.py` - åº”ç”¨ä¸»å…¥å£å’Œç”Ÿå‘½å‘¨æœŸç®¡ç†
- `auth.py` - è®¤è¯å’Œæˆæƒæ¨¡å—
- `constants.py` - å…¨å±€å¸¸é‡å®šä¹‰
- `dmr.py` - è®¾å¤‡ç®¡ç†ç›¸å…³åŠŸèƒ½
- `dual_process_guardian.py` - åŒè¿›ç¨‹å®ˆæŠ¤æœºåˆ¶
- `process_guardian.py` - è¿›ç¨‹å®ˆæŠ¤ç®¡ç†
- `heartbeat_manager.py` - å¿ƒè·³æ£€æµ‹ç®¡ç†
- `persistent_storage.py` - æŒä¹…åŒ–å­˜å‚¨
- `wake_lock.py` - å”¤é†’é”æœºåˆ¶

#### ğŸŒ API æ¥å£ (api/)
- `server.py` - FastAPIæœåŠ¡å™¨é…ç½®
- `routes.py` - APIè·¯ç”±å®šä¹‰
- æä¾›RESTfulæ¥å£æœåŠ¡

#### ğŸ”„ è‡ªæ›´æ–°æ¨¡å— (auto_update/)
- `auto_updater.py` - è‡ªåŠ¨æ›´æ–°ç®¡ç†å™¨
- æ”¯æŒç‰ˆæœ¬æ£€æµ‹å’Œæ›´æ–°æµç¨‹

#### ğŸ’¬ WebSocketé€šä¿¡ (websocket/)
- `client.py` - WebSocketå®¢æˆ·ç«¯
- `message_manager.py` - æ¶ˆæ¯ç®¡ç†å™¨
- `message_handler.py` - æ¶ˆæ¯å¤„ç†å™¨
- `message_sender.py` - æ¶ˆæ¯å‘é€å™¨

#### ğŸ¨ ç”¨æˆ·ç•Œé¢ (ui/)
- `message_box.py` - æ¶ˆæ¯å¼¹çª—ç»„ä»¶
- æä¾›ç”¨æˆ·äº¤äº’ç•Œé¢

#### ğŸ› ï¸ å·¥å…·æ¨¡å— (utils/)
- `environment.py` - ç¯å¢ƒæ£€æµ‹å·¥å…·
- `file_downloader.py` - æ–‡ä»¶ä¸‹è½½å™¨
- `file_utils.py` - æ–‡ä»¶æ“ä½œå·¥å…·
- `http_client.py` - HTTPå®¢æˆ·ç«¯
- `path_utils.py` - è·¯å¾„å¤„ç†å·¥å…·
- `verify_md5.py` - MD5æ ¡éªŒå·¥å…·
- `version_utils.py` - ç‰ˆæœ¬ç®¡ç†å·¥å…·

#### âš™ï¸ é…ç½®æ–‡ä»¶
- `config.py` - åº”ç”¨é…ç½®ç®¡ç†
- `logger.py` - ç»Ÿä¸€æ—¥å¿—ç³»ç»Ÿ

### ğŸ“ æ›´æ–°æ–‡ä»¶ (updates/)
- `local_agent_new.exe` - æ–°ç‰ˆæœ¬å¯æ‰§è¡Œæ–‡ä»¶
- ç”¨äºè‡ªæ›´æ–°åŠŸèƒ½

## æ¨¡å—ä¾èµ–å…³ç³»

```
application.py (ä¸»å…¥å£)
â”œâ”€â”€ api/ (APIæœåŠ¡)
â”œâ”€â”€ websocket/ (WebSocketé€šä¿¡)
â”œâ”€â”€ auto_update/ (è‡ªæ›´æ–°åŠŸèƒ½)
â”œâ”€â”€ core/ (æ ¸å¿ƒç»„ä»¶)
â””â”€â”€ utils/ (å·¥å…·æ¨¡å—)
```

## å¯åŠ¨æµç¨‹

1. **å…¥å£æ–‡ä»¶**: `__main__.py`
2. **åº”ç”¨åˆå§‹åŒ–**: `application.py`
3. **æœåŠ¡å¯åŠ¨**: API + WebSocket
4. **å®ˆæŠ¤è¿›ç¨‹**: åŒè¿›ç¨‹å®ˆæŠ¤æœºåˆ¶

## å¼€å‘è§„èŒƒ

- ä½¿ç”¨é¡¹ç›®ç»Ÿä¸€æ—¥å¿—ç³»ç»Ÿ
- æ¨¡å—é—´é€šè¿‡æ¥å£é€šä¿¡
- æ”¯æŒå¼‚æ­¥æ“ä½œ
- å®Œå–„çš„é”™è¯¯å¤„ç†